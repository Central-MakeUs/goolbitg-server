openapi: 3.0.3
info:
  title: 🎣 굴비잇기 API 서버
  description: 굴비잇기 프로젝트의 API 서버입니다. 뭐 더 쓸게 있나?
  termsOfService: http://localhost:8080/terms-of-service
  version: 1.0.0
servers:
  - url: http://localhost:8080
    description: 로컬호스트 서버
paths:
  /api/v1/users/me:
    get:
      summary: 현재 로그인한 유저 정보 반환
      tags:
        - User
      responses:
        '200':
          description: 현재 로그인한 유저 정보
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '403':
          description: 로그인되지 않았거나 잘못된 인증 정보
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              examples:
                인증 정보 없음:
                  value:
                    code: 1001
                    message: 인증 정보 없음 (Authorization Header Empty)
                잘못된 인증 정보:
                  value:
                    code: 1002
                    message: 잘못된 인증 정보 (Token Not Valid)
components:
  schemas:
    User:
      type: object
      properties:
        id:
          type: string
          description: 사용자 고유 ID값, 랜덤 생성
        nickname:
          type: string
          minimum: 2
          maximum: 6
          description: 한글, 영문 대소문자만 입력 가능
        birthday:
          type: string
          format: date
          description: 생일
        gender:
          type: string
          enum:
            - male
            - female
          description: 성별
        check1:
          type: boolean
          description: 체크리스트 1 체크 여부
        check2:
          type: boolean
          description: 체크리스트 2 체크 여부
        check3:
          type: boolean
          description: 체크리스트 3 체크 여부
        check4:
          type: boolean
          description: 체크리스트 4 체크 여부
        check5:
          type: boolean
          description: 체크리스트 5 체크 여부
        check6:
          type: boolean
          description: 체크리스트 6 체크 여부
        avgIncomePerMonth:
          type: integer
          description: 월간 평균 수입
        avgSpendingPerMonth:
          type: integer
          description: 월간 평균 지출
        primeUseDay:
          type: string
          format: day
          description: 주 지출 요일
        primeUseTime:
          type: string
          format: time
          description: 주 지출 시간, 초로 계산됨
        spendingType:
          $ref: '#/components/schemas/SpendingType'
        spendingHabitScore:
          type: integer
          minimum: 0
          maximum: 100
          description: 소비습관 점수 (0 ~ 100점)
        challengeCount:
          type: integer
          description: 총 챌린지 참여 개수
        postCount:
          type: integer
          description: 총 작성글 수
        achivementGuage:
          type: number
          format: float
          description: 달성 게이지
      required:
        - id
        - nickname
        - birthday
        - gender
        - check1
        - check2
        - check3
        - check4
        - check5
        - check6
        - spendingType
        - spendingHabitScore
      example:
        id: id2003952
        nickname: 굴비왕
        birthday: 1999-03-01
        gender: male
        check1: false
        check2: true
        check3: true
        check4: false
        check5: true
        check6: true
        avgIncomePerMonth: 3600000
        avgSpendingPerMonth: 2000000
        primeUseDay: 금요일
        primeUseTime: 20:00:00
        spendingHabitScore: 62
        spendingType:
          id: 1
          title: 자린고비 굴비
          imageUrl: http://localhost:8080/image/st1
        challengeCount: 14
        postCount: 4
        achivementGuage: 37.2
    SpendingType:
      type: object
      properties:
        id:
          type: integer
          description: 소비유형 ID
        title:
          type: string
          description: 소비유형 이름
        imageUrl:
          type: string
          format: uri
          description: 소비유형 대표 이미지
      example:
        id: 1
        title: 자린고비 굴비
        imageUrl: http://localhost:8080/image/st1
    Challenge:
      type: object
      properties:
        id:
          type: string
          description: 챌린지 ID
        title:
          type: string
          minimum: 1
          maximum: 100 # TODO: Set maximum title length
          description: 챌린지 이름
        imageUrl:
          type: string
          format: uri
          description: 챌린지 대표 이미지 URL
        isPrivate:
          type: boolean
          description: 개인 챌린지 여부
        participantCount:
          type: integer
          description: 챌린지 참여인원
        avgAchiveRatio:
          type: number
          format: float
          description: 챌린지 평균 달성률
        maxAchiveDays:
          type: integer
          description: 가장 오래 진행된 챌린지 일수
      required:
        - id
        - title
        - imageUrl
        - isPrivate
        - participantCount
        - avgAchiveRatio
        - maxAchiveDays
      example:
        $ref: '#/components/examples/PrivateChallenge/value'
    ChallengeProgress:
      type: object
      properties:
        challengeId:
          type: string
          description: 진행중인 챌린지 ID
        participantId:
          type: string
          description: 챌린지 참여자 ID
        startDateTime:
          type: string
          format: date-time
          description: 챌린지 시작일
        endDateTime:
          type: string
          format: date-time
          description: 챌린지 종료일. 아직 종료되지 않은 경우 null
        inProgress:
          type: boolean
          description: 챌린지가 진행중인지 여부
        achiveDays:
          type: integer
          minimum: 0
          maximum: 3
          description: 챌린지 진행 일수
      required:
        - challengeId
        - participantId
        - startDateTime
        - inProgress
        - achiveDays
      example:
        challengeId: ch10001
        participantId: id2003952
        startDateTime: 2024-01-07
        inProgress: true
        achiveDays: 2
    Notice:
      type: object
      properties:
        id:
          type: string
          description: 알림 ID
        receiverId:
          type: string
          description: 수신자 ID
        message:
          type: string
          minimum: 10
          maximum: 100 # TODO: Determine min, max
          description: 메세지 내용
        publishDateTime:
          type: string
          format: date-time
          description: 알림 발송 날짜
        type:
          type: string
          enum:
            - challenge
            - vote
            - chat
          description: 메시지 타입
      required:
        - id
        - receiverId
        - message
        - publishDateTime
        - type
      example:
        id: nt10001
        receiverId: id2003952
        message: 오늘 아직 챌린지를 달성하지 못했어요.
        publishDateTime: 2024-01-07T14:26:32
        type: challenge
    BuyOrNot:
      type: object
      properties:
        id:
          type: string
          description: 살까말까 등록 ID
        writerId:
          type: string
          description: 작성자 ID
        productName:
          type: string
          description: 상품 이름
        productPrice:
          type: integer
          minimum: 1
          maximum: 10000000
          description: 상품 금액
        productImageUrl:
          type: string
          format: uri
          description: 상품 사진 URL
        goodReason:
          type: string
          minimum: 2
          maximum: 25 # TODO: Determine min, max
          description: 사야하는 이유
        badReason:
          type: string
          minimum: 2
          maximum: 25 # TODO: Determine min, max
          description: 사지 말아야 하는 이유
      required:
        - id
        - writerId
        - productName
        - productPrice
        - productImageUrl
        - goodReason
        - badReason
      example:
        id: bn10001
        writerId: id2003952
        productName: Tecket 후드티
        productPrice: 97000
        productImageUrl: http://localhost:8080/image/bn1
        goodReason: 후드티 안산지 벌써 2년 다됨
        badReason: 집에 후드티만 10장 있긴함
    HabitPatternAnalysis:
      type: object
      properties:
        typeRatio:
          type: array
          description: 타입별 비율 모음
          items:
            type: object
            properties:
              id:
                type: integer
                description: 타입 ID
              value:
                type: number
                format: float
                description: 타입 비율
        avgChallengeCounts:
          type: array
          description: 타입별 평군 챌린지 개수
          items:
            type: object
            properties:
              id:
                type: integer
                description: 타입 ID
              value:
                type: integer
                description: 참여 개수
      example:
        typeRatio:
          - id: 1
            value: 5.0
          - id: 2
            value: 12.0
          - id: 3
            value: 18.0
          - id: 4
            value: 25.0
          - id: 5
            value: 40.0
        avgChallengeCounts:
          - id: 1
            value: 3
          - id: 2
            value: 5
          - id: 3
            value: 6
          - id: 4
            value: 4
          - id: 5
            value: 2
    Error:
      type: object
      properties:
        code:
          type: integer
          minimum: 1000
          maximum: 9000
          description: 오류 코드
        message:
          type: string
          minimum: 1
          maximum: 100
          description: 오류 메세지
      required:
        - code
        - message
      example:
        code: 1000
        message: 알 수 없는 서버 오류
    PaginatedResult:
      type: object
      properties:
        totalSize:
          type: integer
          description: 총 아이템 수
        totalPages:
          type: integer
          description: 총 페이지 수
        size:
          type: integer
          default: 10
          description: 아이템 개수
        page:
          type: integer
          minimum: 1
          default: 1
          description: 페이지 번호 (1부터 시작)
        items:
          type: array
          description: 아이템 목록
          items:
            type: object
            description: 오버리이드 되어야 함.
        nextPageUrl:
          type: string
          format: uri
          description: 다음 페이지 URL
        prevPageUrl:
          type: string
          format: uri
          description: 이전 페이지 URL
      required:
        - totalSize
        - totalPages
        - size
        - page
        - items
      example:
        totalSize: 231
        totalPages: 24
        size: 10
        page: 3
  examples:
    PrivateChallenge:
      value:
        id: ch10001
        title: 택시타지 않기
        imageUrl: http://localhost:8080/image/ch1
        isPrivate: false
        participantCount: 124
        avgAchiveRatio: 58.6
        maxAchiveDays: 24
    GroupChallenge:
      value:
        id: ch10002
        title: 배달음식 먹지 않기
        imageUrl: http://localhost:8080/image/ch2
        isPrivate: true
        participantCount: 1539
        avgAchiveRatio: 39.6
        maxAchiveDays: 52
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
security:
  - bearerAuth: []
tags:
  - name: User
